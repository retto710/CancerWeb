<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>DermaApp</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/estilosLogin.css" rel="stylesheet" media="all">
        <script src="https://www.gstatic.com/firebasejs/5.9.4/firebase-app.js"></script>
    </head>
    <body>
        <header class="main-header">
            <a href="" class="title-header">Derma App</a>
        </header>

        <div class="login-page">
            <h2 class="login-title">Login</h2>
            <div class="form">
              <form>
                  <input class="input_login" type="email" id="txtLoginUsuario" name="txtLoginUsuario" placeholder="Email"/>
                <input class="input_login" type="password" id="txtLoginClave" name="txtLoginClave" placeholder="Clave"/>
                <input class="button_login" type="button" id="btnLogin" value="Login to Account" onclick="login();"/>
                <p class="message">Soy nuevo, quiero <a href="registroDermatologo.html">Registrarme</a></p>
              </form>
            </div>
        </div>

        <script src="https://www.gstatic.com/firebasejs/5.9.4/firebase.js"></script>
        
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyBje_8i495uHrmJE3e95mLEsvh9hdgFF_Y",
                authDomain: "cancerapp-79383.firebaseapp.com",
                databaseURL: "https://cancerapp-79383.firebaseio.com",
                projectId: "cancerapp-79383",
                storageBucket: "cancerapp-79383.appspot.com",
                messagingSenderId: "644286998392"
            };
            firebase.initializeApp(config);
        </script>

        <script>
            
            function login(){
                var userEmail = document.getElementById('txtLoginUsuario').value;
                var userPass = document.getElementById('txtLoginClave').value;
                firebase.auth().signInWithEmailAndPassword(userEmail, userPass).catch(function(error) {
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    console.log("Error: " + errorMessage);
                });
                //location.href = "dashboard.html";
                //window.open('dashboard.html','_self',false)
            }
        </script>
        <script>
            firebase.auth().onAuthStateChanged(function(user) {
                var user = firebase.auth().currentUser;
                if (user) {
                    // User is signed in.
                    window.open('dashboard.html','_self',false)
//                    alert(user.email);
//                    if(user != null){
//                      var email_id = user.email;
//                    }
                } else {
                    // No user is signed in.
                    //alert("no logeado");
                }
            });
        </script>
    </body>
</html>